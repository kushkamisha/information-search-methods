
# Search system estimation (Champion list)
*  `r = 3`
*  `filter = 70%`

## Queries
#1 `его величество волшебник`
#2 `аделаида ивановна`
#3 `он она они оно`

## Documents
(1) `Война и мир. Том 1`
(2) `Война и мир. Том 2`
(3) `Война и мир. Том 3`
(4) `Война и мир. Том 4`
(5) `Мастер и Маргарита`
(6) `Волшебник Изумрудного города`
(7) `Братья Карамазовы`
(8) `Идиот`
(9) `Униженные и оскорбленные`
(10) `Бесы`

## Is query relevant? [expert estimation]
|query\docId|(1)|(2)|(3)|(4)|(5)|(6)|(7)|(8)|(9)|(10)|
|-----------|---|---|---|---|---|---|---|---|---|----|
|#1         | 1 | 1 | 1 | 1 | 0 | 1 | 0 | 0 | 0 | 0  |
|#2         | 0 | 1 | 1 | 0 | 0 | 0 | 1 | 1 | 0 | 1  |
|#3         | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1  |

## Program results
|query\docId|(1)|(2)|(3)|(4)|(5)|(6)|(7)|(8)|(9)|(10)|
|-----------|---|---|---|---|---|---|---|---|---|----|
|#1         | 1 | 0 | 1 | 0 | 0 | 1 | 0 | 0 | 0 | 0  |
|#2         | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 1 | 0 | 1  |
|#3         | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0  |

## Metrics
### Precision, Recall, and Correctness
*tp - true positive*
*fp - false positive*
*tn - true negative*
*fn - false negative*

**P** = tp / (tp + fp) = 3 / (3 + 0) = **1**
**R** = tp / (tp + fn) = 3 / (3 + 2) = **0.6**
**C** = (tp + tn) / (tp + fp + fn + tn) = (3 + 7) / (3 + 0 + 2 + 7) = 5 / 6 ≈ **0.833**

### F-score
*using β = 1*
F = P * R / (P + R) = 1 * 0.6 / (1 + 0.6) ≈ **0.375**

### Kappa score
P(A) = 1 if expert estimations are the same for a query (zero otherwise)
P(E) - from 0 to 1 - the probability that expert estimations are coincidentally coincided

#### Expert 1
|query\docId|(1)|(2)|(3)|(4)|(5)|(6)|(7)|(8)|(9)|(10)|
|-----------|---|---|---|---|---|---|---|---|---|----|
|#1         | 1 | 1 | 1 | 1 | 0 | 1 | 0 | 0 | 0 | 0  |
|#2         | 0 | 1 | 1 | 0 | 0 | 0 | 1 | 1 | 0 | 1  |
|#3         | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1  |
#### Expert 2
|query\docId|(1)|(2)|(3)|(4)|(5)|(6)|(7)|(8)|(9)|(10)|
|-----------|---|---|---|---|---|---|---|---|---|----|
|#1         | 1 | 1 | 1 | 1 | 0 | 1 | 0 | 1 | 0 | 0  |
|#2         | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 1 | 0 | 0  |
|#3         | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 0  |

#### Results
|ex1\ex2| yes | no | total
|-------|-----|----|-----|
| yes   | 16  | 4  | 20
| no    | 1   | 9  | 10
| total | 17  | 13 | **30**

**P(A)** = (16 + 9) / 30 ≈ **0.833**
**P(non-relevanlt)** = (10 + 13) / (30 + 30) ≈ **0.383**
**P(relevant)** = (17 + 20) / (30 + 30) ≈ **0.616**
**P(E)** = P(non-relevanlt)^2^ + P(relevanlt)^2^ = 0.383^2^ + 0.616^2^ ≈ **0.526**
**K** = (P(A) - P(E)) / (1 - P(E)) = (0.833 - 0.526) / (1 - 0.526) ≈ **0.648**

